:root {
  color: var(--text);
  background: var(--background);
}

* {
  box-sizing: border-box;
}

html {
  scrollbar-gutter: stable;
}

html,
body {
  width: 100%;
  max-width: 100%;
  margin: 0;
  padding: 0;
  overflow-x: hidden; /* critical: stop the “white area to the right” */
}

/* ---------- Base controls ---------- */

button {
  background: var(--buttons);
  color: white;
  border: 1px solid transparent;
  padding: 2px 2px;
  border-radius: 10px;
  font-weight: 700;
  cursor: pointer;
  max-width: 100%;
}

button:hover {
  filter: brightness(0.97);
}

button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

button.btn-secondary {
  background: transparent;
  color: var(--text);
  border: 1px solid var(--border);
}

input,
select,
textarea {
  background: var(--surface);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 6px 8px;
  outline: none;
  max-width: 100%;
}

input:focus,
select:focus,
textarea:focus {
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--buttons) 25%, transparent);
  border-color: color-mix(in srgb, var(--buttons) 60%, var(--border));
}

/* ---------- Layout helpers ---------- */

.pageWrap {
  padding: 16px;
  padding-bottom: 24px; /* desktop default */
  max-width: 100%;
}

.tabNav {
  display: flex;
  gap: 10px;
  margin-bottom: 18px;
}

/* Equal-width action buttons (desktop 4 across, mobile 2 across) */
.lineupActions {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 8px;
}

.lineupActions button {
  width: 100%;
}

/* Player label clamp (kept, but your shrinking logic is in JS) */
.playerLabel {
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  overflow: hidden;
}

/* Goalies: align with Forward / Defence rows on desktop */
.goalieRow {
  display: grid;
  grid-template-columns: 120px 170px;
  gap: 12px;
  align-items: start;
  color: var(--surface);
}

.goalieGrid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(170px, 170px));
  gap: 12px;
  min-width: 0;
}

/* =========================
   Players list "table-like" row
   ========================= */

.playersList {
  display: grid;
  gap: 0;
  min-width: 0;
  border-radius: 10px;
  background: var(--surface);
}

.playerRow {
  display: grid;
  grid-template-columns: 44px minmax(160px, 1fr) 44px 120px 60px 1fr 150px;
  gap: 6px;
  align-items: center;
  padding: 6px 10px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.12);
  min-width: 0;
}

.playerNum {
  grid-column: 1;
  justify-self: end;
  font-weight: 700;
  white-space: nowrap;
}

/* Make sure the name column is allowed to shrink inside the grid */
.playerNameCell {
  min-width: 0; /* critical for ellipsis + shrink */
}

/* Shrink name on small screens, keep it readable on desktop */
.playerNameText {
  font-weight: 800;
  line-height: 1.1;

  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

  /* auto scale: phone -> smaller, desktop -> bigger */
  font-size: clamp(10px, 3.2vw, 14px);
}

.playerLeader {
  grid-column: 3;
  justify-self: start;
  font-weight: 900;
  font-size: clamp(10px, 3.2vw, 14px);
  padding: 0px 5px;
  border-radius: 14px;
  color: var(--leader, var(--accent));
  border-right: 2px solid var(--leader, var(--accent));
  border-left: 2px solid var(--leader, var(--accent));
  white-space: nowrap;
}

.playerPos {
  grid-column: 4;
  min-width: 0;
  font-size: 14px;
}

.playerStick {
  grid-column: 5;
  justify-self: start;
  font-size: 10px;
  white-space: nowrap;
  opacity: 0.85;
}

.playerCanPlay {
  grid-column: 6;
  min-width: 0;
  font-size: 10px;
  opacity: 0.85;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.playerActions {
  grid-column: 7;
  display: flex;
  gap: 8px;
  justify-content: flex-end;
  font-size: 12px;
  min-width: 0;
}

/* NOT USED ANYMORE
.playerMeta {
  min-width: 0;
  display: flex;
  gap: 10px;
  flex-wrap: wrap;     
  align-items: center;
}
*/

/* =========================
   Breakpoint A: “doesn’t fit” (small desktop / landscape tablets)
   Keep # + Name + Leadership on line 1
   Details go to their OWN lines (no overlap)
   Actions last line
   ========================= */
@media (max-width: 980px) {
  .playerRow {
    /* 4 columns: num | name (bounded) | lead | spacer */
    grid-template-columns: 44px 170px 70px 1fr;
    grid-template-areas:
      "num  name  lead ."
      ".    pos can ."
      ".    stick  act .";
    row-gap: 6px;
    column-gap: 10px;
    align-items: center;
    justify-content: start;
  }

  .playerNum {
    grid-area: num;
    justify-self: end;
    text-align: right;
    font-weight: 800;
    white-space: nowrap;
  }

  .playerNameCell {
    grid-area: name;
    min-width: 0;
  }

  .playerLeader {
    grid-area: lead;
    justify-self: start;
    margin-left: 0px; /* small gap from name */
  }

  .playerPos {
    grid-area: pos;
    justify-self: start;
  }

  .playerStick {
    grid-area: stick;
    justify-self: start;
  }

  .playerCanPlay {
    grid-area: can;
    justify-self: start;
    white-space: normal;
    overflow: visible;
    text-overflow: unset;
  }

  .playerActions {
    grid-area: act;
    justify-content: flex-start;
    gap: 10px;
  }

  .playerNameText {
    font-size: clamp(12px, 3.6vw, 15px);
  }
}


/* =========================
   Phone (<= 800px)
   Leadership CLOSE to name (not pushed to far right)
   Details on separate lines (no overlap)
   ========================= */
@media (max-width: 800px) {
  .playerRow {
    display: grid;

    /* KEY FIX: name is AUTO, lead sits in next column and is left-aligned */
    grid-template-columns: 44px 170px 70px 1fr;

    grid-template-areas:
      "num  name  lead ."
      ".    pos   can ."
      ".    stick act .";

    row-gap: 6px;
    column-gap: 10px;
    align-items: center;
    justify-content: start;
  }

  .playerNum {
    grid-area: num;
    justify-self: end;
    white-space: nowrap;
  }

  .playerNameCell {
    grid-area: name;
    min-width: 0;
  }

  .playerLeader {
    grid-area: lead;
    justify-self: start;
    margin-left: 0px; /* small gap from name */
  }

  .playerPos {
    grid-area: pos;
    justify-self: start;
  }

  .playerStick {
    grid-area: stick;
    justify-self: start;
  }

  .playerCanPlay {
    grid-area: can;
    justify-self: start;
    white-space: normal;
    overflow: visible;
    text-overflow: unset;
  }

  .playerActions {
    grid-area: act;
    justify-content: flex-start;
    gap: 10px;
  }

  .playerNameText {
    font-size: clamp(12px, 3.6vw, 15px);
  }
}

/* ---------- Mobile overrides ---------- */
@media (max-width: 800px) {
  /* EDGE-TO-EDGE: removes the red margins you highlighted */
  .pageWrap {
    padding: 2px !important;
    padding-bottom: 140px !important; /* space for bottom nav */
    margin: 0px !important;
    max-width: 100% !important;
  }

  /* Bottom sticky tab bar */
  .tabNav {
    position: fixed;
    left: 10px;
    right: 10px;
    bottom: 10px;
    z-index: 50;

    justify-content: space-around;
    gap: 8px;
    margin: 0;

    padding: 8px;
    border-radius: 16px;
    border: 1px solid var(--border);

    background: color-mix(in srgb, var(--surface) 85%, transparent);
    backdrop-filter: blur(6px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
  }

  .tabNav a {
    flex: 1;
    text-align: center;
    padding: 10px 8px !important;
    border-radius: 12px !important;
    font-weight: 800;
  }

  /* Headings: reduce wasted space */
  h2,
  h3 {
    margin: 6px 0 !important;
  }

  /* Layout: 1 column on phone */
  .rostersLayout,
  .lineupsLayout {
    grid-template-columns: 1fr !important;
    gap: 10px !important;
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 !important;
  }

  /* Critical: allow grid/flex children to shrink */
  .rostersLayout *,
  .lineupsLayout * {
    min-width: 0 !important;
    max-width: 100% !important;
  }

  /* Rosters: prevent “cut off to the right” in portrait */
  .rostersTopRow,
  .rostersActionsRow,
  .playersRow {
    flex-wrap: wrap !important;
  }

  .rostersActionsRow {
    width: 100%;
    display: flex;
    gap: 8px;
  }

  .rostersActionsRow button {
    flex: 1 1 45%;
    min-width: 0;
  }

  .rostersSearch {
    width: 100% !important;
  }

  /* Line-ups: tighten spacing so bubbles get more room */
  .lineRow,
  .pairRow {
    grid-template-columns: 1fr !important;
    gap: 3px !important;
  }

  /* GOALIES: on phone ignore the 120px alignment */
  .goalieRow {
    grid-template-columns: 1fr !important;
    gap: 3px !important;
  }

  .forwardGrid,
  .defenceGrid {
    gap: 3px !important;
  }

  .rowLabel {
    padding-top: 0 !important;
    margin-bottom: -6px;
  }

  /* Keep players next to each other on phone */
  .forwardGrid {
    grid-template-columns: 1fr 1fr 1fr !important;
  }

  .defenceGrid {
    grid-template-columns: 1fr 1fr !important;
  }

  .goalieGrid {
    grid-template-columns: 1fr 1fr !important;
  }

  /* Action buttons: 2 columns on phone */
  .lineupActions {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  /* Clamp tighter on mobile (if you still use clamp anywhere) */
  .playerLabel {
    -webkit-line-clamp: 1 !important;
    line-clamp: 1 !important;
  }

  /* Prevent grid/flex children from forcing overflow */
  .rostersLayout,
  .rostersLayout * {
    min-width: 0;
  }

  /* Add Player row 2 becomes 2 columns on phone (Position full width, then Leadership+Stick) */
  .addPlayerRow2 {
    grid-template-columns: 1fr 1fr !important;
  }

  .addPlayerRow2 select:first-child {
    grid-column: 1 / -1; /* Position on its own row */
  }

  @media (max-width: 800px) and (orientation: portrait) {
    .colorRow {
      grid-template-columns: 150px 50px 70px !important;
      grid-auto-rows: auto;
    }
  }
}
